# 指标体系建设 — 详细设计方案

下面把“指标体系建设”拆解为可执行的模块与工作包，覆盖目标、治理、数据模型、元数据、表单/取证映射、评分规则、版本管理、验证机制、UI/API 接口、实施路线与交付物。适合用于沈阳市义务教育优质均衡发展督导评估管理系统的落地实施说明书或招标技术附件。

---

## 一、目标与原则

**目标**

* 建立一套可复用、可扩展、可追溯的指标体系元数据库（指标库），支撑全市督导评估的配置、填报、自动评分与报告生成。
* 支持指标分级、要素化、证据化、规则化、版本化管理。
* 保证数据标准化、来源可溯、变更可控，便于与学籍、教师、财政等既有系统对接。

**设计原则**

* 标准化：统一字段、单位、编码规范与取数口径。
* 模块化：指标→要素→取证点→字段（最小单元）。
* 可配置化：评分规则、权重、取证方式均可配置。
* 向后兼容：指标变更需兼容历史数据对比。
* 角色化：不同角色有不同视图与权限（市/区/校/专家）。
* 可审计：所有变更、评分与取证均留痕。

---

## 二、治理与组织（谁来做、如何做）

**治理主体**

1. **市级指标管理委员会**（市教育局为主导）

   * 批准指标体系版本、发布市级指标模板与口径。
2. **技术实施组**

   * 系统工程师、数据工程师、产品与 UI 设计师、QA。
3. **区县协同小组**

   * 接受培训，负责本辖区指标本地化建议与校验。
4. **专家顾问组**

   * 提供评分规则、量表与定性判断的技术支撑。

**流程（职责）**

* 制定→评审→试点→发布→培训→收集反馈→迭代
* 任何变更必须走“变更评审→影响评估→回滚方案→发布时间窗”流程

---

## 三、数据模型（元数据层）

### 1. 四层主模型（必备）

```
Indicator (指标)
  └─ Element (评估要素)
       └─ EvidencePoint / TakePoint (取证点)
             └─ Field (字段/问题/附件)
```

### 2. 关键元字段（示例）

* Indicator: id, code, name, level(一/二级), description, weight, parent_id, status, effective_from, effective_to, version
* Element: id, code, name, indicator_id, description, default_role, scoring_rule_id, weight, status
* EvidencePoint: id, code, element_id, type(form|questionnaire|inspection|autoImport|file), description, required, data_field_ids[]
* Field: id, code, label, data_type(number/text/date/file/enum/matrix), unit, validation_rules, source_system_mapping, default_value

### 3. 评分规则（Rule）模型

* rule_id, rule_type(quantitative/qualitative/mixed), formula, thresholds[], weight, method(linear/banded/minimum/weighted), parameters, json_schema

---

## 四、指标与表单/取证映射策略

### 1. 映射方式（优先级）

1. **字段级映射（强关联）**：EvidencePoint.field → Form.fieldID
2. **模板级绑定**：Element → FormTemplate（适用于标准表格）
3. **自动化导入映射**：Element/EvidencePoint → 外部系统字段（教师库、学籍）
4. **专家查验映射**：Element → InspectionTemplate（移动端）
   （推荐：使用“字段级映射 + 模板级绑定”的混合方式）

### 2. 映射表（示例表）

* Indicator_Field_Mapping(indicator_id, element_id, evidencePoint_id, field_id, source_type, source_ref)

---

## 五、评分规则设计与管理

### 1. 规则类型

* **定量（Quantitative）**：基于数值与阈值（公式/区间/线性映射）
* **定性（Qualitative）**：专家等级/评分量表（A/B/C/D 或 0-100）
* **混合（Mixed）**：权重合成（例如：60% 数值 + 40% 专家评分）
* **一票否决（Veto）**：达成关键负面项则不通过

### 2. 规则表达格式（建议 JSON Schema）

* 支持 formula（表达式）、conditions、scoreBuckets、weight、aggregationMethod
* 提供表达式编辑器（可视化）并生成 JSON，供评分引擎执行

### 3. 规则管理功能

* 版本控制（草稿/待审/生效/历史）
* 影响分析（变更会影响哪些学校/指标）
* 规则测试台（模拟历史数据或样本数据查看评分结果）

---

## 六、版本管理与回溯

### 1. 版本策略

* **语义版本**：Major.Minor.Patch（大改/小改/修正）
* **生效窗口**：每个版本须设置 effective_from、effective_to
* **历史数据兼容**：评分引擎在计算时需结合数据发生时间选择对应规则版本

### 2. 变更流程

* 变更申请 → 影响分析 → 专家评审 → 市局批准 → 发布（选择窗口） → 同步表单模板 → 培训与支持

---

## 七、验证、校验与质量保障

### 1. 配置校验

* 字段一致性校验（单位/数据类型）
* 权重总和校验（指标下要素权重合计=100%）
* 表达式语法校验（表达式构建器实时解析）
* 依赖校验（外部系统字段存在性）

### 2. 数据校验规则（采集端）

* 必填/格式/范围/参考值校验
* 文件类型与大小校验（照片、扫描件）
* 样本一致性检测（例如：教师总数=学籍导入的教师数）

### 3. 数据质控流程

* 自动质检（规则引擎预警）
* 人工复核（区县/市局）
* 异常处置（退回、补报、人工更正留痕）

---

## 八、UI/交互与管理界面（为实施提供界面设计要点）

### 1. 指标管理台（市局）

* 指标树（可折叠）
* 指标/要素详情面板（编码/说明/权重/责任单位/版本）
* 批量操作（复制、迁移、导入/导出）
* 影响分析按钮（查看受影响学校、样本评分变化）

### 2. 评分规则编辑器

* 规则类型选择（Radio）
* 可视化表达式构建器（拖拽字段→条件→结果）
* 右侧 JSON 预览（即刻反映）
* 规则测试台（导入样本或选择学校运行）

### 3. 映射管理

* 字段映射列表（可搜索）
* 映射预览（表单字段 ↔ 指标要素）
* 一键同步表单变更

---

## 九、API 与对外接口设计

### 1. 核心 API（示例）

* GET /api/indicators → 列表/筛选
* GET /api/indicators/{id} → 指标详情（含要素与规则）
* POST /api/indicators → 新建指标
* PUT /api/indicators/{id} → 更新（版本控制）
* GET /api/rules/{id}/test → 规则测试（输入数据）
* POST /api/mapping/sync → 同步表单字段到要素

### 2. 数据导入接口

* /api/import/teacher、/api/import/student、/api/import/fiscal（批量、校验、回执）

### 3. Webhook / 消息机制

* 指标版本发布 → 通知区县管理员、触发表单同步任务

---

## 十、数据库与持久化（概要 ER）

主要表（示例）：

* indicators, elements, evidence_points, fields, scoring_rules, rule_versions, indicator_field_mapping, form_templates, form_fields, task_definitions

（建议由实施团队基于上文元字段设计具体 ER 图并建模）

---

## 十一、实施路线与里程碑（示例 6 个月路线）

**阶段 0 — 预研（2 周）**

* 组建团队、收集现有指标与报表、确定实施方法

**阶段 1 — 方案与元数据建模（3 周）**

* 设计元数据模型、字段字典、版本策略

**阶段 2 — 原型与规则编辑器开发（5 周）**

* 提供评分规则编辑器原型、API 规范

**阶段 3 — 指标库与映射实现（6 周）**

* 建立基础指标库、表单模板、映射工具

**阶段 4 — 试点（2 区县，4 周）**

* 试点配置、数据采集、规则测试、专家评分

**阶段 5 — 优化与扩展（4 周）**

* 根据试点反馈优化、完成系统文档

**阶段 6 — 全市上线与培训（4 周）**

* 全量导入指标、发布版本、分批培训区县/学校

---

## 十二、交付物（交付清单）

1. 指标体系总体设计文档（含治理流程）
2. 指标元数据字典（Excel/CSV）
3. 数据模型 ER 图（PNG/SVG）
4. 评分规则 JSON Schema 与示例集合
5. 表单/映射规范文档（含 API）
6. 规则编辑器原型（Figma）
7. 试点报告（数据、问题、改进建议）
8. 培训手册与操作手册（市/区/校/专家版）

---

## 十三、风险与缓解措施

1. **风险**：指标频繁变更导致历史可比性丧失
   **缓解**：严格版本策略，变更窗口、影响分析、历史规则并存计算

2. **风险**：基层（学校）填报能力不足
   **缓解**：提供模板化表单、H5 填报、数据校验与本地培训

3. **风险**：外部系统对接延迟或字段不匹配
   **缓解**：引入中间层映射服务并支持补丁/人工确认流程

---

