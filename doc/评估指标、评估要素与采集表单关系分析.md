评估指标、评估要素与采集表单关系分析
根据对代码库的分析，这三个核心概念的关系如下：
一、概念定义
概念	定义	主要文件
评估指标	用于评估教育对象的评价标准，采用三级树形结构	indicatorService.ts
评估要素	构成数据采集表单的基本数据项（基础要素/派生要素）	toolService.ts
采集表单	用于收集评估数据的工具（表单/问卷）	toolService.ts
二、数据结构关系
┌─────────────────────────────────────────────────────────────────┐
│                      评估项目 (Project)                          │
│                indicator_system_id → 指标体系                    │
└─────────────────────────────────────────────────────────────────┘
                              │
          ┌───────────────────┼───────────────────┐
          ▼                   ▼                   ▼
┌──────────────────┐  ┌──────────────────┐  ┌──────────────────┐
│   评估指标体系    │  │    采集表单      │  │   填报记录        │
│                  │  │   (DataTool)     │  │  (Submission)    │
│ ├─ 一级指标      │  │                  │  │                  │
│ │  └─ 二级指标   │  │ ├─ schema字段    │  │ ├─ project_id    │
│ │    └─ 三级指标 │  │ │  (FormField[]) │  │ ├─ form_id       │
│ │      ├─ 数据指标│  │ ├─ 目标对象      │  │ ├─ data (JSON)   │
│ │      └─ 佐证资料│  │ └─ 状态         │  │ └─ 附件资料      │
│ └────────────────┘  └──────────────────┘  └──────────────────┘
                              ▲
                              │ 设计时引用
                      ┌──────────────────┐
                      │    评估要素库     │
                      │                  │
                      │ ├─ 基础要素      │
                      │ │  (直接采集)    │
                      │ └─ 派生要素      │
                      │    (公式计算)    │
                      └──────────────────┘
三、核心关联关系
1. 指标 ↔ 数据采集
末级指标（三级指标）包含：
数据指标 - 具体要采集的数据项及阈值
佐证资料 - 需要上传的证明材料配置
// 末级指标结构 (indicatorService.ts)
interface Indicator {
  dataIndicators?: DataIndicator[];      // 数据指标
  supportingMaterials?: SupportingMaterial[];  // 佐证资料
}
2. 要素 ↔ 表单设计
基础要素：直接映射为表单字段（如：学校名称 → text字段）
派生要素：通过公式自动计算（如：生师比 = 学生数 / 教师数）
// 要素定义 (toolService.ts)
interface Element {
  elementType: '基础要素' | '派生要素';
  dataType: '文本' | '数字' | '日期' | '时间' | '逻辑' | '数组' | '文件';
  formula?: string;  // 派生要素的计算公式
}
3. 表单 ↔ 填报记录
表单定义 schema（字段配置）
填报记录存储实际 data（JSON格式）
四、数据库关联（schema.sql）
关系	外键	说明
项目→指标体系	projects.indicator_system_id	一对一
指标→数据指标	data_indicators.indicator_id	一对多
指标→佐证资料	supporting_materials.indicator_id	一对多
要素→要素库	elements.library_id	多对一
填报→表单	submissions.form_id	多对一
填报→项目	submissions.project_id	多对一
五、业务流程
指标体系建设                    采集工具设计                  数据填报
     │                              │                          │
     ▼                              ▼                          ▼
创建指标树(1-2-3级)  ──────►  根据指标设计表单  ──────►  填报人填写数据
     │                              │                          │
     ▼                              ▼                          ▼
末级指标配置:                 引用要素库字段               上传佐证资料
├─ 数据指标(阈值)            ├─ 基础要素                       │
└─ 佐证资料要求              └─ 派生要素(公式)                 ▼
                                                          提交审核
六、关键代码位置
模块	前端页面	后端API
指标管理	IndicatorLibrary, IndicatorTreeEdit	indicators.js
要素管理	ElementLibrary	tools.js
表单管理	ToolLibrary, FormToolEdit	tools.js
数据填报	DataEntry, DataEntryForm	submissions.js
总结
三者的核心关系是：
评估指标定义"评什么"和"达标标准"
评估要素定义"采集什么数据"（可复用的数据项库）
采集表单是"怎么采集"的具体工具，将要素组织成可填报的界面
它们通过评估项目整合在一起，实现从指标定义→工具设计→数据采集→结果评估的完整闭环。